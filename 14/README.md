# 第14章 消息划分

|本期版本| 上期版本
|:---:|:---:
`Tue Mar 11 18:55:16 CST 2025` | -


## 14.1 使用新行

* 使用新行的确是一种划分消息的简单方法
* `gets`、`puts`

> 在现实中使用新行划分消息的协议是HTTP

```
GET /index.html HTTP/1.1\r\n
Host: www.example.com\r\n
\r\n
```

* 使用转义序列`\r\n` 明确的标出了新行

## 14.2 使用内容长度

* 消息发送方先计算出消息的长度，使用pack将其转化成固定宽度的整数，后面跟上消息主体一并发送
* 消息接受方首先读取这个长度值。然后接收方严格读取长度值所指定的字节数，获取完整的消息